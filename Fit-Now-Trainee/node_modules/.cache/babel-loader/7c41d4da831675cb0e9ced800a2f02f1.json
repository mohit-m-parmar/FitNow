{"ast":null,"code":"var _jsxFileName = \"/Users/mohitparmar/Documents/Tester/SD2022/Fit-Now-Trainee/src/components/Account.js\";\nimport React, { useContext, useState } from \"react\";\nimport { AppContext } from \"../index\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ReactComponent as Barbell } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/barbell.svg\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Grid } from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { setUser, signOut } from \"../global/Reducer\";\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    maxWidth: \"80%\",\n    marginTop: \"15px\"\n  },\n  title: {\n    fontSize: 20\n  },\n  delbutton: {\n    color: \"#ff1744\"\n  }\n});\nexport default function Edit() {\n  const app = useContext(AppContext);\n  const classes = useStyles();\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [phno, setPh] = useState(\"\");\n  const [open, setOpen] = useState(false);\n  const [pref, setPref] = useState(\"\");\n\n  function editprof() {\n    const requestOptions = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        name,\n        ph_no: phno,\n        age,\n        gender,\n        pref\n      })\n    };\n    fetch(`http://127.0.0.1:5001/users/${app.state.user.id}`, requestOptions).then(response => response.json()).then(data => {\n      if (data.message === \"modified\") {\n        console.log(data);\n        app.dispatch(setUser(data.new));\n        setOpen(true);\n      } else {\n        alert(data.message);\n      }\n    });\n  }\n\n  function deleteprof() {\n    const conf = prompt(\"Are you sure you want to delete your account? Type 'YES' to confirm\");\n\n    if (conf === \"YES\") {\n      fetch(`http://127.0.0.1:5001/users/${app.state.user.id}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.json()).then(data => {\n        if (data.message === \"deleted successfully\") {\n          console.log(data);\n          app.dispatch(signOut());\n          alert(\"account deleted\");\n        } else {\n          alert(data.message);\n        }\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justifyContent: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justifyContent: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Barbell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.title,\n    color: \"textSecondary\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Edit user profile\"), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    label: \"Name\",\n    type: \"text\",\n    defaultValue: app.state.user.name,\n    variant: \"outlined\",\n    onChange: event => {\n      setName(event.target.value);\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    label: \"Email Address\",\n    type: \"email\",\n    defaultValue: app.state.user.email,\n    variant: \"outlined\",\n    onChange: event => {\n      setEmail(event.target.value);\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    label: \"Phone Number\",\n    type: \"text\",\n    defaultValue: app.state.user.phno,\n    variant: \"outlined\",\n    onChange: event => {\n      setPh(event.target.value);\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    label: \"Gender\",\n    type: \"text\",\n    defaultValue: app.state.user.gender,\n    variant: \"outlined\",\n    onChange: event => {\n      setGender(event.target.value);\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    label: \"Age\",\n    type: \"text\",\n    defaultValue: app.state.user.age,\n    variant: \"outlined\",\n    onChange: event => {\n      setAge(event.target.value);\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    label: \"What are you looking for?\",\n    type: \"text\",\n    defaultValue: app.state.user.pref,\n    variant: \"outlined\",\n    onChange: event => {\n      setPref(event.target.value);\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justifyContent: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: editprof,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, \"Save changes\"), /*#__PURE__*/React.createElement(Button, {\n    className: classes.delbutton,\n    onClick: deleteprof,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, \"Delete account\"))))), /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"left\"\n    },\n    open: open,\n    autoHideDuration: 6000,\n    onClose: () => setOpen(false),\n    message: \"Changes saved\",\n    action: /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      size: \"small\",\n      \"aria-label\": \"close\",\n      color: \"inherit\",\n      onClick: () => setOpen(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      fontSize: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/mohitparmar/Documents/Tester/SD2022/Fit-Now-Trainee/src/components/Account.js"],"names":["React","useContext","useState","AppContext","makeStyles","Card","CardActions","CardContent","Button","Typography","Grid","TextField","Snackbar","IconButton","CloseIcon","setUser","signOut","useStyles","root","minWidth","maxWidth","marginTop","title","fontSize","delbutton","color","Edit","app","classes","email","setEmail","name","setName","age","setAge","gender","setGender","phno","setPh","open","setOpen","pref","setPref","editprof","requestOptions","method","headers","body","JSON","stringify","ph_no","fetch","state","user","id","then","response","json","data","message","console","log","dispatch","new","alert","deleteprof","conf","prompt","event","target","value","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { AppContext } from \"../index\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ReactComponent as Barbell } from \"../assets/barbell.svg\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Grid } from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { setUser, signOut } from \"../global/Reducer\";\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275,\n    maxWidth: \"80%\",\n    marginTop: \"15px\",\n  },\n  title: {\n    fontSize: 20,\n  },\n  delbutton: {\n    color: \"#ff1744\",\n  },\n});\n\nexport default function Edit() {\n  const app = useContext(AppContext);\n  const classes = useStyles();\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [phno, setPh] = useState(\"\");\n  const [open, setOpen] = useState(false);\n  const [pref, setPref] = useState(\"\");\n\n  function editprof() {\n    const requestOptions = {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        email: email,\n        name,\n        ph_no: phno,\n        age,\n        gender,\n        pref,\n      }),\n    };\n    fetch(`http://127.0.0.1:5001/users/${app.state.user.id}`, requestOptions)\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.message === \"modified\") {\n          console.log(data);\n          app.dispatch(setUser(data.new));\n          setOpen(true);\n        } else {\n          alert(data.message);\n        }\n      });\n  }\n\n  function deleteprof() {\n    const conf = prompt(\n      \"Are you sure you want to delete your account? Type 'YES' to confirm\"\n    );\n    if (conf === \"YES\") {\n      fetch(`http://127.0.0.1:5001/users/${app.state.user.id}`, {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          if (data.message === \"deleted successfully\") {\n            console.log(data);\n            app.dispatch(signOut());\n            alert(\"account deleted\");\n          } else {\n            alert(data.message);\n          }\n        });\n    }\n  }\n\n  return (\n    <div>\n      <Grid container justifyContent=\"center\">\n        <Card className={classes.root}>\n          <CardContent>\n            <Grid container justifyContent=\"center\">\n              <Barbell />\n            </Grid>\n            <Typography\n              className={classes.title}\n              color=\"textSecondary\"\n              gutterBottom\n            >\n              Edit user profile\n            </Typography>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Name\"\n              type=\"text\"\n              defaultValue={app.state.user.name}\n              variant=\"outlined\"\n              onChange={(event) => {\n                setName(event.target.value);\n              }}\n              fullWidth\n            />\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Email Address\"\n              type=\"email\"\n              defaultValue={app.state.user.email}\n              variant=\"outlined\"\n              onChange={(event) => {\n                setEmail(event.target.value);\n              }}\n              fullWidth\n            />\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Phone Number\"\n              type=\"text\"\n              defaultValue={app.state.user.phno}\n              variant=\"outlined\"\n              onChange={(event) => {\n                setPh(event.target.value);\n              }}\n              fullWidth\n            />\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Gender\"\n              type=\"text\"\n              defaultValue={app.state.user.gender}\n              variant=\"outlined\"\n              onChange={(event) => {\n                setGender(event.target.value);\n              }}\n              fullWidth\n            />\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Age\"\n              type=\"text\"\n              defaultValue={app.state.user.age}\n              variant=\"outlined\"\n              onChange={(event) => {\n                setAge(event.target.value);\n              }}\n              fullWidth\n            />\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"What are you looking for?\"\n              type=\"text\"\n              defaultValue={app.state.user.pref}\n              variant=\"outlined\"\n              onChange={(event) => {\n                setPref(event.target.value);\n              }}\n              fullWidth\n            />\n          </CardContent>\n          <CardActions>\n            <Grid container justifyContent=\"space-between\">\n              <Button variant=\"contained\" color=\"primary\" onClick={editprof}>\n                Save changes\n              </Button>\n              <Button className={classes.delbutton} onClick={deleteprof}>\n                Delete account\n              </Button>\n            </Grid>\n          </CardActions>\n        </Card>\n      </Grid>\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        open={open}\n        autoHideDuration={6000}\n        onClose={() => setOpen(false)}\n        message=\"Changes saved\"\n        action={\n          <React.Fragment>\n            <IconButton\n              size=\"small\"\n              aria-label=\"close\"\n              color=\"inherit\"\n              onClick={() => setOpen(false)}\n            >\n              <CloseIcon fontSize=\"small\" />\n            </IconButton>\n          </React.Fragment>\n        }\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}